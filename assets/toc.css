/* Basic layout: TOC left, content right (desktop) */
.layout { display: grid; grid-template-columns: 280px 1fr; gap: 24px; }
#TOC { position: sticky; top: 72px; max-height: calc(100vh - 96px); overflow: auto; }

/* Desktop/tablet: simple hide/show via display (closed by default) */
@media (min-width: 601px) {
  html:not(.toc-open) #TOC { display: none; }
  html.toc-open #TOC { display: block; }
}

/* Phones only: off-canvas overlay driven by transform */
@media (max-width: 600px) {
  .layout { display: block; }

  /* Keep it rendered so it can animate; hide via transform+visibility */
  #TOC {
    position: fixed; inset: 0 auto 0 0; width: 82%; max-width: 360px;
    background: var(--bg); border-right: 1px solid var(--border); padding: 16px;
    transform: translateX(-100%); visibility: hidden;
    transition: transform .2s ease, visibility .2s ease;
    z-index: 1001;
  }
  html.toc-open #TOC { transform: translateX(0); visibility: visible; }

  /* Backdrop */
  .toc-backdrop {
    position: fixed; inset: 0; background: #0008;
    opacity: 0; pointer-events: none; transition: opacity .2s; z-index: 1000;
  }
  html.toc-open .toc-backdrop { opacity: 1; pointer-events: auto; }
}

/* Safety */
[hidden] { display: none !important; }